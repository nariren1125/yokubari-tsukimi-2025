<!DOCTYPE html>
<html>
  <head>
    <!-- Google Fonts 読み込み -->
    <link href="https://fonts.googleapis.com/css2?family=Bitcount+Prop+Double+Ink&display=swap" rel="stylesheet">
    <title><%= content_for?(:title) ? yield(:title) : "秋のよくばりお月見メーカー" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <link rel="manifest" href="/manifest.json">
    <link rel="icon" href="/icon.png" type="image/png">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/icon.png">
    <%= javascript_importmap_tags %>

    <!-- ✅ OGP設定ここから -->
<% if defined?(@item) && @item.present? %>
  <meta property="og:title" content="<%= @item.name %>" />
  <meta property="og:description" content="<%= @item.desc.truncate(100) %>" />
  <meta property="og:image" content="<%= asset_url('ogp_default.jpg') %>" />
  <meta property="og:url" content="<%= item_url(@item) %>" />
<% else %>
  <meta property="og:title" content="秋のよくばりお月見メーカー" />
  <meta property="og:description" content="秋のお月見限定商品をチェック！" />
  <meta property="og:image" content="<%= asset_url('ogp_default.jpg') %>" />
  <meta property="og:url" content="<%= root_url %>" />
<% end %>

<!-- Twitterカード設定 -->
<meta name="twitter:card" content="summary_large_image" />
<!-- ✅ OGP設定ここまで -->
  </head>

  <body>
    <%= yield %>
    <!-- 商品画像拡大用モーダル -->
    <div id="image-modal" class="image-modal" hidden>
      <button class="close-modal">×</button>
      <img id="modal-image" src="" alt="拡大画像">
    </div>
  </body>
</html>
